(self.webpackChunknotebook=self.webpackChunknotebook||[]).push([[9418],{20464:function(e,n,t){"use strict";t.r(n),t.d(n,{assets:function(){return m},contentTitle:function(){return l},default:function(){return k},frontMatter:function(){return s},metadata:function(){return d},toc:function(){return c}});var a=t(23405),i=t(54751),r=(t(22374),t(70224)),p=t(91297),o=["components"],s={title:"15.samba\u5171\u4eab\u6587\u4ef6\u5939\u521d\u63a2",tags:["Linux"],categories:["Linux"],date:new Date("2020-02-11T23:26:00.000Z")},l=void 0,d={unversionedId:"Linux/samba\u5171\u4eab\u6587\u4ef6\u5939\u521d\u63a2",id:"Linux/samba\u5171\u4eab\u6587\u4ef6\u5939\u521d\u63a2",title:"15.samba\u5171\u4eab\u6587\u4ef6\u5939\u521d\u63a2",description:"1 \u4ec0\u4e48\u662fsamba?",source:"@site/docs/02.Linux/15.samba\u5171\u4eab\u6587\u4ef6\u5939\u521d\u63a2.md",sourceDirName:"02.Linux",slug:"/Linux/samba\u5171\u4eab\u6587\u4ef6\u5939\u521d\u63a2",permalink:"/docs/Linux/samba\u5171\u4eab\u6587\u4ef6\u5939\u521d\u63a2",draft:!1,editUrl:"https://github.com/wuchuheng/wuchuheng.github.io/edit/master/docs/02.Linux/15.samba\u5171\u4eab\u6587\u4ef6\u5939\u521d\u63a2.md",tags:[{label:"Linux",permalink:"/docs/tags/linux"}],version:"current",sidebarPosition:15,frontMatter:{title:"15.samba\u5171\u4eab\u6587\u4ef6\u5939\u521d\u63a2",tags:["Linux"],categories:["Linux"],date:"2020-02-11T23:26:00.000Z"},sidebar:"tutorialSidebar",previous:{title:"14.\u7528\u6237\u7684Bash\u7684\u9ed8\u8ba4\u914d\u7f6e.bashrc",permalink:"/docs/Linux/\u7528\u6237\u7684Bash\u7684\u9ed8\u8ba4\u914d\u7f6e.bashrc"},next:{title:"16.\u5b89\u88c5Arch",permalink:"/docs/Linux/\u5b89\u88c5Arch"}},m={},c=[{value:"1 \u4ec0\u4e48\u662fsamba?",id:"1-\u4ec0\u4e48\u662fsamba",level:2},{value:"2 \u4e3b\u63a7\u7aef(\u670d\u52a1\u7aef)\u5b89\u88c5<code>samba</code>",id:"2-\u4e3b\u63a7\u7aef\u670d\u52a1\u7aef\u5b89\u88c5samba",level:3},{value:"2.1 \u51c6\u5907\u5de5\u4f5c",id:"21-\u51c6\u5907\u5de5\u4f5c",level:4},{value:"2.2 \u542f\u52a8\u670d\u52a1",id:"22-\u542f\u52a8\u670d\u52a1",level:4},{value:"2.3 \u5f00\u653e\u7aef\u53e3",id:"23-\u5f00\u653e\u7aef\u53e3",level:3},{value:"3 \u5728<code>windows</code>\u4e0b\u8fde\u63a5",id:"3-\u5728windows\u4e0b\u8fde\u63a5",level:2},{value:"3.1 \u914d\u7f6e\u7528\u6237\u7aef\u7aef\u53e3\u8f6c\u53d1",id:"31-\u914d\u7f6e\u7528\u6237\u7aef\u7aef\u53e3\u8f6c\u53d1",level:3}],u={toc:c};function k(e){var n=e.components,t=(0,i.Z)(e,o);return(0,r.kt)("wrapper",(0,a.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"1-\u4ec0\u4e48\u662fsamba"},"1 \u4ec0\u4e48\u662fsamba?"),(0,r.kt)("p",null,"\u2003",(0,r.kt)("inlineCode",{parentName:"p"},"samba"),"\u662f\u57fa\u4e8e",(0,r.kt)("inlineCode",{parentName:"p"},"smb"),"\u4f20\u8f93\u534f\u8bae\u7684\u6570\u636e\u5171\u4eab\u8f6f\u4ef6\uff0c\u901a\u5e38\u7528\u4e8e\u63d0\u4f9b\u8de8\u5e73\u53f0\u8de8\u4e3b\u673a\u7684\u6587\u4ef6\u5171\u4eab\u670d\u52a1\u3002"),(0,r.kt)("h3",{id:"2-\u4e3b\u63a7\u7aef\u670d\u52a1\u7aef\u5b89\u88c5samba"},"2 \u4e3b\u63a7\u7aef(\u670d\u52a1\u7aef)\u5b89\u88c5",(0,r.kt)("inlineCode",{parentName:"h3"},"samba")),(0,r.kt)("h4",{id:"21-\u51c6\u5907\u5de5\u4f5c"},"2.1 \u51c6\u5907\u5de5\u4f5c"),(0,r.kt)("p",null,"\u4e00\u53f0\u5b89\u88c5\u597d",(0,r.kt)("inlineCode",{parentName:"p"},"docker"),"\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"linux"),"\u4e3b\u673a.\u4e0d\u77e5\u9053\u5b89\u88c5\u53ef\u4ee5\u53c2\u8003",(0,r.kt)("a",{parentName:"p",href:"https://docs.docker.com/"},"\u5b98\u65b9\u6587\u6863")),(0,r.kt)("h4",{id:"22-\u542f\u52a8\u670d\u52a1"},"2.2 \u542f\u52a8\u670d\u52a1"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'docker run -it -p 139:139 -p 62727:445 \\\n            -p 137:137/udp -p 138:138/udp \\\n            -v /www/wwwroot/:/share/ \\\n            --name smb \\\n            -d dperson/samba -p \\\n            -u "example1;badpass" \\\n            -s "public;/share/public" \\\n            -s "example1;/share/example1;no;no;no;example1" \n')),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u4ee5\u4e0a\u662f\u628a\u672c\u5730\u76ee\u5f55\u6302\u8f7d\u7684\u5bb9\u5668\u4e2d\u53bb\uff0c\u5e76\u57fa\u4e8e\u6302\u8f7d\u7684\u76ee\u5f55\u4e0a\u518d\u521b\u5efa\u5171\u4eab\u7684\u76ee\u5f55\uff0c\u5206\u522b\u521b\u5efa2\u4e2a\u76ee\u5f55",(0,r.kt)("inlineCode",{parentName:"p"},"public"),"\u548c",(0,r.kt)("inlineCode",{parentName:"p"},"example1"),"\u76ee\u5f55\uff0c\u4e00\u4e2a\u662f\u516c\u5f00\u7684\uff0c\u4f46\u4e0d\u80fd\u5199\uff0c\u4e00\u4e2a\u662f\u8981\u8d26\u53f7\u5bc6\u7801\u7684\uff0c\u5e76\u914d\u7f6e\u53ef\u4ee5\u8fdb\u884c\u8bfb\u5199\u3002\u66f4\u591a\u7684\u914d\u7f6e\u53c2\u6570\u53c2\u6570\u53ef\u4ee5\u53c2\u8003\u955c\u50cf\u7684",(0,r.kt)("a",{parentName:"p",href:"https://hub.docker.com/r/dperson/samba"},"\u8bf4\u660e"),"\u3002")),(0,r.kt)("div",{className:"admonition admonition-warning alert alert--danger"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"warning")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"2017 5\u6708\u6bd4\u7279\u5e01\u52d2\u7d22\u75c5\u6bd2\u4e8b\u4ef6\u5bfc\u81f4",(0,r.kt)("inlineCode",{parentName:"p"},"445"),"\u7aef\u53e3\u81f3\u4eca\u8fd8\u88ab\u7f51\u7edc\u8fd0\u8425\u5546\u54c1\u5c01\u4f4f\uff0c\u8fd9\u91cc\u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"62727"),"\u7aef\u53e3\u6765\u66ff\u4ee3\u3002"))),(0,r.kt)("h3",{id:"23-\u5f00\u653e\u7aef\u53e3"},"2.3 \u5f00\u653e\u7aef\u53e3"),(0,r.kt)("p",null,"\u2003","\u5728",(0,r.kt)("inlineCode",{parentName:"p"},"linux"),"\u5982\u679c\u4f60\u662f",(0,r.kt)("inlineCode",{parentName:"p"},"iptables"),"\u9632\u706b\u5899\u5219",(0,r.kt)("inlineCode",{parentName:"p"},"IO"),"\u7b56\u7565\u4e3a:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"sudo iptables -I INPUT -p tcp --dport 139 -j ACCEPT\nsudo iptables -I INPUT -p tcp --dport 62727 -j ACCEPT \nsudo iptables -I INPUT -p udp --dport 137 -j ACCEPT\nsudo iptables -I INPUT -p udp --dport 138 -j ACCEPT\n")),(0,r.kt)("p",null,"\u2003","\u5982\u679c\u662f\u5176\u5b83\u7684\u9632\u706b\u5899\uff0c\u8bf7\u67e5\u9605\u76f8\u5173\u7684\u8d44\u6599\u3002",(0,r.kt)("br",{parentName:"p"}),"\n","","\u6700\u7ec8\u7684\u6548\u679c\u662f\u8ba9\u5916\u7f51\u80fd\u8bbf\u95ee\u5230\u8fd94\u4e2a\u7aef\u53e3\uff0c\u6d4b\u8bd5\u53ef\u4ee5\u662f",(0,r.kt)("inlineCode",{parentName:"p"},"telnet"),"\u5de5\u5177\u6d4b\u8bd5",(0,r.kt)("inlineCode",{parentName:"p"},"tcp"),"\u7684\u7aef\u53e3",(0,r.kt)("inlineCode",{parentName:"p"},"139"),"\u548c",(0,r.kt)("inlineCode",{parentName:"p"},"62727"),"\u683c\u5f0f\u4e3a",(0,r.kt)("inlineCode",{parentName:"p"},"telnet <IP> <port>")," \u80fd\u8fde\u63a5\u4e0a\u5219\u8868\u660e\u7aef\u53e3\u5df2\u7ecf\u6b63\u5e38\u4e86\u3002\u5efa\u8bae\u662f\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"nmap"),"\u7684\u7aef\u53e3\u626b\u63cf\u5de5\u5177\u6765\uff0c\u683c\u5f0f\u4e3a",(0,r.kt)("inlineCode",{parentName:"p"},"nmap <IP>")," \u6700\u7ec8\u80fd\u8bbf\u95ee\u7684\u7aef\u53e3\u90fd\u4f1a\u663e\u793a\u51fa\u6765\u3002"),(0,r.kt)("div",{className:"admonition admonition-warning alert alert--danger"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"warning")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"\u4e00\u5b9a\u8981\u5728\u7528\u6237\u673a\u5b50\u4e0a\u8fdb\u884c\u6d4b\u8bd5\u4e3a\u51c6\u3002"))),(0,r.kt)("h2",{id:"3-\u5728windows\u4e0b\u8fde\u63a5"},"3 \u5728",(0,r.kt)("inlineCode",{parentName:"h2"},"windows"),"\u4e0b\u8fde\u63a5"),(0,r.kt)("p",null,"\u2003","\u7531\u4e8e\u7f51\u6c11\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"445"),"\u7aef\u53e3\u51fa\u65b9\u5411\u88ab\u5c01\u4e86\u3002\u9700\u8981\u8bbf\u95ee\u7684\u6570\u636e\u8f6c\u53d1\u5230\u80fd\u8bbf\u95ee\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"62727"),"\u7aef\u53e3\u4e0a,\u6d41\u7a0b\u5927\u81f4\u4e3a:"),(0,r.kt)(p.Mermaid,{config:{},chart:"graph TB\n    \u672c\u5730127.0.0.1--62727\u7aef\u53e3--\x3e\u5bbf\u4e3b\u673a:62727\u7aef\u53e3\n    subgraph \u4e3b\u63a7\u7aef\n    \u5bbf\u4e3b\u673a:62727\u7aef\u53e3--455\u7aef\u53e3--\x3e\u5bb9\u5668\u63d0\u4f9b\u7684\u670d\u52a1\n    end\n    subgraph \u7528\u6237\u7aef\n    \u5171\u4eab\u6587\u4ef6\u5939\u8fde\u63a5\u672c\u5730--445\u7aef\u53e3--\x3e\u672c\u5730127.0.0.1\n    end",mdxType:"Mermaid"}),(0,r.kt)("h3",{id:"31-\u914d\u7f6e\u7528\u6237\u7aef\u7aef\u53e3\u8f6c\u53d1"},"3.1 \u914d\u7f6e\u7528\u6237\u7aef\u7aef\u53e3\u8f6c\u53d1"),(0,r.kt)("p",null,"\u6253\u5f00",(0,r.kt)("inlineCode",{parentName:"p"},"cmd"),"\uff0c\u4ee5\u7ba1\u7406\u5458\u8eab\u4efd\u6253\u5f00(\u5982\u679c\u4e0d\u662f\u5219",(0,r.kt)("inlineCode",{parentName:"p"},"ctrl+R"),",\u7136\u540e",(0,r.kt)("inlineCode",{parentName:"p"},"Ctrl+Shift+Enter"),"\u5207\u6362)."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"    netsh interface portproxy add v4tov4 listenport=445 connectaddress=\u8fdc\u7a0bip connectport=62727\n")),(0,r.kt)("p",null,"\u67e5\u770b\u662f\u5426\u751f\u6548\u53ef\u4ee5\u518d\u8f93\u5165:",(0,r.kt)("inlineCode",{parentName:"p"},"netsh interface portproxy show all"),"\u6765\u67e5\u8be2\u5df2\u7ecf\u751f\u6548\u7684\u7aef\u53e3\u8f6c\u53d1"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"Microsoft Windows [Version 10.0.18362.592]\n(c) 2019 Microsoft Corporation. All rights reserved.\n\nC:\\Windows\\system32>netsh interface portproxy show all\n\nListen on ipv4:             Connect to ipv4:\n\nAddress         Port        Address         Port\n--------------- ----------  --------------- ----------\n*               445         120.132.11. 62727\n\n\nC:\\Windows\\system32>\n")),(0,r.kt)("p",null,"\u5982\u679c\u8981\u5220\u9664\u5219",(0,r.kt)("inlineCode",{parentName:"p"},"netsh interface portproxy delete v4tov4 listenaddress=\u6b32\u5220\u9664\u9879\u76ee\u7684\u76d1\u542cIP listenport=\u6b32\u5220\u9664\u9879\u76ee\u7684\u76d1\u542c\u7aef\u53e3"),(0,r.kt)("br",{parentName:"p"}),"\n",""," \u6700\u540e",(0,r.kt)("inlineCode",{parentName:"p"},"Ctrl-R")," \u7136\u540e\u8f93\u5165",(0,r.kt)("inlineCode",{parentName:"p"},"\\\\127.0.0.1"),"\u5c31\u53ef\u4ee5\u8bbf\u95ee\u4e86\u4e0d\u7528\u5bc6\u7801\u7684\u516c\u5f00\u76ee\u5f55\uff0c\u800c",(0,r.kt)("inlineCode",{parentName:"p"},"\\\\127.0.0.1\\example1"),"\u8f93\u5165\u4e0b\u5bc6\u7801\u5c31\u80fd\u8bbf\u95ee\u8d26\u53f7\u4e0b\u7684\u76ee\u5f55\u4e86\u3002\u9700\u8981\u6dfb\u52a0\u5feb\u6377\u65b9\u5f0f\u5219\u5728\u6587\u4ef6\u7ba1\u7406\u5668\u4e2d\u914d\u7f6e\u4e0b\u7f51\u7edc\u4f4d\u7f6e\u65b9\u4fbf\u4e0b\u6b21\u4f7f\u7528."),(0,r.kt)("p",null,"\u672c\u6587\u8d44\u6599\u53c2\u8003\u4e8e\uff1a\n\u7aef\u53e3\u8f6c\u53d1\u5185\u5bb9\u90e8\u5206: ",(0,r.kt)("a",{parentName:"p",href:"https://www.zhihu.com/question/59814912"},"https://www.zhihu.com/question/59814912"),(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("inlineCode",{parentName:"p"},"cmd"),"\u7ba1\u7406\u5458\u90e8\u5206: ",(0,r.kt)("a",{parentName:"p",href:"https://blog.csdn.net/zyw_anquan/article/details/7756499"},"https://blog.csdn.net/zyw_anquan/article/details/7756499"),(0,r.kt)("br",{parentName:"p"}),"\n","\u955c\u50cf\u5185\u5bb9\u90e8\u5206: ",(0,r.kt)("a",{parentName:"p",href:"https://hub.docker.com/r/dperson/samba"},"https://hub.docker.com/r/dperson/samba"),(0,r.kt)("br",{parentName:"p"}),"\n","\u672c\u5730\u8f6c\u53d1\u90e8\u5206: ",(0,r.kt)("a",{parentName:"p",href:"https://blog.csdn.net/cxwithyxy/article/details/83864824"},"https://blog.csdn.net/cxwithyxy/article/details/83864824"),"\n",(0,r.kt)("inlineCode",{parentName:"p"},"docker"),"\u6848\u4f8b\u90e8\u5206: ",(0,r.kt)("a",{parentName:"p",href:"https://blog.joefom.com/archives/164"},"https://blog.joefom.com/archives/164")),(0,r.kt)("p",null,"\u76f8\u5173\u8d44\u6599:\nsmbclient\u4f7f\u7528\u8bf4\u660e: ",(0,r.kt)("a",{parentName:"p",href:"https://blog.csdn.net/yexiangcsdn/article/details/82867469"},"https://blog.csdn.net/yexiangcsdn/article/details/82867469")))}k.isMDXComponent=!0},95537:function(e,n,t){var a={"./locale":14360,"./locale.js":14360};function i(e){var n=r(e);return t(n)}function r(e){if(!t.o(a,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return a[e]}i.keys=function(){return Object.keys(a)},i.resolve=r,e.exports=i,i.id=95537}}]);