"use strict";(self.webpackChunknotebook=self.webpackChunknotebook||[]).push([[6429],{70224:function(e,n,t){t.d(n,{Zo:function(){return c},kt:function(){return m}});var a=t(22374);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var s=a.createContext({}),p=function(e){var n=a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},c=function(e){var n=p(e.components);return a.createElement(s.Provider,{value:n},e.children)},k={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},d=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=p(t),m=r,u=d["".concat(s,".").concat(m)]||d[m]||k[m]||i;return t?a.createElement(u,o(o({ref:n},c),{},{components:t})):a.createElement(u,o({ref:n},c))}));function m(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var i=t.length,o=new Array(i);o[0]=d;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var p=2;p<i;p++)o[p]=t[p];return a.createElement.apply(null,o)}return a.createElement.apply(null,t)}d.displayName="MDXCreateElement"},29461:function(e,n,t){t.r(n),t.d(n,{assets:function(){return c},contentTitle:function(){return s},default:function(){return m},frontMatter:function(){return l},metadata:function(){return p},toc:function(){return k}});var a=t(23405),r=t(54751),i=(t(22374),t(70224)),o=["components"],l={title:"02.\u5b89\u88c5jenkins",date:new Date("2021-05-10T00:00:00.000Z"),tags:["CI/CD","Jenkins"],categories:["CI/CD"]},s=void 0,p={unversionedId:"CICD/\u5b89\u88c5jenkins",id:"CICD/\u5b89\u88c5jenkins",title:"02.\u5b89\u88c5jenkins",description:"1\u5728linux centos\u4e0b\u5b89\u88c5",source:"@site/docs/13.CICD/02.\u5b89\u88c5jenkins.md",sourceDirName:"13.CICD",slug:"/CICD/\u5b89\u88c5jenkins",permalink:"/docs/CICD/\u5b89\u88c5jenkins",draft:!1,editUrl:"https://github.com/wuchuheng/wuchuheng.github.io/edit/master/docs/13.CICD/02.\u5b89\u88c5jenkins.md",tags:[{label:"CI/CD",permalink:"/docs/tags/ci-cd"},{label:"Jenkins",permalink:"/docs/tags/jenkins"}],version:"current",sidebarPosition:2,frontMatter:{title:"02.\u5b89\u88c5jenkins",date:"2021-05-10T00:00:00.000Z",tags:["CI/CD","Jenkins"],categories:["CI/CD"]},sidebar:"tutorialSidebar",previous:{title:"01 Github Action\u57fa\u672c\u4f7f\u7528",permalink:"/docs/CICD/GithubAction/GithubAction\u57fa\u672c\u4f7f\u7528"},next:{title:"03.\u90e8\u7f72docker\u79c1\u6709\u955c\u50cf\u5e93",permalink:"/docs/CICD/\u90e8\u7f72docker\u79c1\u6709\u955c\u50cf\u5e93"}},c={},k=[{value:"1\u5728<code>linux centos</code>\u4e0b\u5b89\u88c5",id:"1\u5728linux-centos\u4e0b\u5b89\u88c5",level:2},{value:"1.1 \u5b89\u88c5<code>jenkins</code>\u7684\u542f\u52a8\u4f9d\u8d56\u73af\u5883",id:"11-\u5b89\u88c5jenkins\u7684\u542f\u52a8\u4f9d\u8d56\u73af\u5883",level:3},{value:"1.2 \u4f7f\u7528\u5b89\u88c5<code>jenkins</code>",id:"12-\u4f7f\u7528\u5b89\u88c5jenkins",level:3},{value:"1.3 \u542f\u52a8<code>jenkins</code>",id:"13-\u542f\u52a8jenkins",level:3},{value:"1.4 \u5f00\u542f\u5916\u90e8\u8bbf\u95ee\u7aef\u53e3",id:"14-\u5f00\u542f\u5916\u90e8\u8bbf\u95ee\u7aef\u53e3",level:3},{value:"2 docker \u65b9\u5f0f\u5b89\u88c5jenkins",id:"2-docker-\u65b9\u5f0f\u5b89\u88c5jenkins",level:2}],d={toc:k};function m(e){var n=e.components,t=(0,r.Z)(e,o);return(0,i.kt)("wrapper",(0,a.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"1\u5728linux-centos\u4e0b\u5b89\u88c5"},"1\u5728",(0,i.kt)("inlineCode",{parentName:"h2"},"linux centos"),"\u4e0b\u5b89\u88c5"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"\u53c2\u6570\u540d"),(0,i.kt)("th",{parentName:"tr",align:null},"\u53c2\u6570\u503c"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"OS"),(0,i.kt)("td",{parentName:"tr",align:null},"centos7")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"memory"),(0,i.kt)("td",{parentName:"tr",align:null},"8G")))),(0,i.kt)("div",{className:"admonition admonition-warning alert alert--danger"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"\u6ce8\u610f")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"\u5185\u5b58\u548c\u914d\u7f6e\u5c3d\u91cf\u9ad8\u4e9b\uff0c\u5728\u6784\u5efa\u5927\u5e94\u7528\u65f6\u76f8\u5bf9\u6765\u8bf4\u4f1a\u5feb\u4e9b, \u8fd9\u91cc\u6f14\u793a\u7684\u662f",(0,i.kt)("inlineCode",{parentName:"p"},"centos"),"\uff0c\u5982\u679c\u8ddf\u6211\u7cfb\u7edf\u73af\u5883\u4e0d\u592a\u4e00\u6837\uff0c\u8bf7\u53c2\u7167",(0,i.kt)("a",{parentName:"p",href:"https://www.jenkins.io/doc/book/installing/linux/"},"\u5b98\u65b9\u5b89\u88c5\u8bf4\u660e\u6587\u6863"),"\u3001\n\u627e\u5230\u4f60\u5bf9\u5e94\u7684\u7cfb\u7edf\u7248\u672c\u7684\u5b89\u88c5\u8bf4\u660e\u6765\u5b89\u88c5\uff0c\u6211\u4e5f\u662f\u770b\u8bf4\u660e\u6765\u5b89\u88c5\u7684\u3002"))),(0,i.kt)("h3",{id:"11-\u5b89\u88c5jenkins\u7684\u542f\u52a8\u4f9d\u8d56\u73af\u5883"},"1.1 \u5b89\u88c5",(0,i.kt)("inlineCode",{parentName:"h3"},"jenkins"),"\u7684\u542f\u52a8\u4f9d\u8d56\u73af\u5883"),(0,i.kt)("p",null,"\u2003"," ",(0,i.kt)("inlineCode",{parentName:"p"},"jenkins"),"\u4f9d\u8d56\u4e8e",(0,i.kt)("inlineCode",{parentName:"p"},"java"),"\u73af\u5883\uff0c\u5b89\u88c5\u524d\u9700\u8981\u5148\u5b89\u88c5",(0,i.kt)("inlineCode",{parentName:"p"},"java"),", \u6211\u7528",(0,i.kt)("inlineCode",{parentName:"p"},"yum"),"\u5305\u7ba1\u7406\u5668\u7684\u65b9\u5f0f\u6765\u5b89\u88c5:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"$ sudo yum install -y java\n")),(0,i.kt)("h3",{id:"12-\u4f7f\u7528\u5b89\u88c5jenkins"},"1.2 \u4f7f\u7528\u5b89\u88c5",(0,i.kt)("inlineCode",{parentName:"h3"},"jenkins")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"$ sudo wget -O /etc/yum.repos.d/jenkins.repo https://pkg.jenkins.io/redhat-stable/jenkins.repo\n$ sudo rpm --import https://pkg.jenkins.io/redhat-stable/jenkins.io.key\n$ sudo yum install jenkins\n")),(0,i.kt)("h3",{id:"13-\u542f\u52a8jenkins"},"1.3 \u542f\u52a8",(0,i.kt)("inlineCode",{parentName:"h3"},"jenkins")),(0,i.kt)("p",null,"\u5b89\u88c5\u5b8c\u6210\u540e\uff0c\u901a\u8fc7",(0,i.kt)("inlineCode",{parentName:"p"},"systemctl"),"\u6765\u542f\u52a8"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"$ systemctl enable jenkins # \u5f00\u673ajenkins\u542f\u52a8\n$ systemctl start jenkins # \u542f\u52a8jenkins\n")),(0,i.kt)("h3",{id:"14-\u5f00\u542f\u5916\u90e8\u8bbf\u95ee\u7aef\u53e3"},"1.4 \u5f00\u542f\u5916\u90e8\u8bbf\u95ee\u7aef\u53e3"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"jenkins"),"\u662f\u542f\u52a8\u4e86\uff0c\u4f46\u7531\u4e8e\u7cfb\u7edf\u7684\u9632\u706b\u5899\u9650\u5236\u5916\u90e8\u8bbf\u95ee\u65e0\u6cd5\u8fdb\u6765\uff0c\u9700\u8981\u914d\u7f6e\u4e0b\u653e\u884c\u89c4\u5219:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"$ sudo firewall-cmd --zone=public --add-port=8080/tcp --permanent\n$ sudo firewall-cmd --zone=public --add-port=50000/tcp --permanent\n$ sudo systemctl reload firewalld # \u91cd\u8f7d\u9632\u706b\u5899\u914d\u7f6e\uff0c\u8ba9\u5b83\u751f\u6548\n")),(0,i.kt)("p",null,"\u7136\u540e\u5c31\u53ef\u4ee5\u8bbf\u95ee:",(0,i.kt)("inlineCode",{parentName:"p"},"ip:8080"),"\uff0c \u5e76\u663e\u793a\u4ee5\u4e0b\u754c\u9762:\n",(0,i.kt)("img",{parentName:"p",src:"https://qiniu.wuchuheng.com/image/20210627181629.png",alt:null}),"\n\u8868\u793a",(0,i.kt)("inlineCode",{parentName:"p"},"jenkins"),"\u6b63\u5e38\u5728\u542f\u52a8\u4e2d...",(0,i.kt)("br",{parentName:"p"}),"\n","\u542f\u52a8\u6210\u529f\u540e\uff0c\u5219\u63d0\u793a\u521d\u59cb\u5316\u5bc6\u7801\u7684\u4f4d\u7f6e\uff1a\n",(0,i.kt)("img",{parentName:"p",src:"https://qiniu.wuchuheng.com/image/20210627182042.png",alt:null})),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"\u5728\u7ec8\u7aef\u4e0b\u628a\u5bc6\u7801\u6253\u5370\u51fa\u6765\uff0c\u7136\u540e\u586b\u8fdb\u53bb\u5c31\u53ef\u4ee5\u4e86"),(0,i.kt)("pre",{parentName:"blockquote"},(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"$ sudo cat /var/lib/jenkins/secrets/initialAdminPassword\nXXXXXXXXXXXXXXXXx #<--- \u88ab\u6253\u5370\u51fa\u6765\u7684\u521d\u59cb\u5316\u767b\u5f55\u5bc6\u7801\n"))),(0,i.kt)("h2",{id:"2-docker-\u65b9\u5f0f\u5b89\u88c5jenkins"},"2 docker \u65b9\u5f0f\u5b89\u88c5jenkins"),(0,i.kt)("div",{className:"admonition admonition-warning alert alert--danger"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"\u4e25\u91cd\u8b66\u544a")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},(0,i.kt)("inlineCode",{parentName:"p"},"jenkin"),"\u8fd0\u884c\u5728",(0,i.kt)("inlineCode",{parentName:"p"},"docker"),"\u4e2d\u786e\u5b9a\u5f88\u65b9\u4fbf\uff0c\u4e0d\u8fc7\uff0c\u4f46",(0,i.kt)("inlineCode",{parentName:"p"},"docker"),"\u4e0e",(0,i.kt)("inlineCode",{parentName:"p"},"\u7cfb\u7edf"),"\u7684\u6302\u8f7d\u6587\u4ef6\u4ea4\u4e92\u7684",(0,i.kt)("inlineCode",{parentName:"p"},"IO"),"\u7684\u6709\u5ef6\u8fdf\u7684\uff0c\u4ece\u800c\u5728\u6784\u5efa\u6d89\u53ca\u5230\u78c1\u76d8\u5de8\u91cf",(0,i.kt)("inlineCode",{parentName:"p"},"IO"),"\u7684\u5e94\u7528\u65f6\uff0c\n\u4f1a\u62d6\u57ae\u6574\u4e2a\u6784\u5efa\u5e94\u7528\u7684\u901f\u5ea6\u3002"))),(0,i.kt)("p",null,"\u2003","\u8ba9",(0,i.kt)("inlineCode",{parentName:"p"},"jenkins"),"\u8fd0\u884c\u5728",(0,i.kt)("inlineCode",{parentName:"p"},"docker"),"\u4e2d\uff0c\u76f8\u5bf9\u4e8e\u5728\u672c\u5730\u5b89\u88c5--\u66f4\u7701\u4e8b\u3002\u5728\u5b89\u88c5\u597d",(0,i.kt)("inlineCode",{parentName:"p"},"docker"),"\u7684\u524d\u63d0\u4e0b\u76f4\u63a5\u8fd0\u884c:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"$ docker run \\\n  -u root \\\n  --rm \\  \n  -d \\ \n  -p 8080:8080 \\ \n  -p 50000:50000 \\ \n  -v jenkins-data:/var/jenkins_home \\ \n  -v /var/run/docker.sock:/var/run/docker.sock \\ \n  jenkinsci/blueocean \n")),(0,i.kt)("p",null,"\u5982\u679c\u6709\u5b89\u88c5\u597d\u672c\u5730\u7684",(0,i.kt)("inlineCode",{parentName:"p"},"docker-composer"),",\u90a3\u66f4\u597d\u4e86\uff0c\u914d\u7f6e\u4e0b\u542f\u52a8\u6587\u4ef6:"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"docker-compose.yml"),(0,i.kt)("pre",{parentName:"blockquote"},(0,i.kt)("code",{parentName:"pre",className:"language-yml"},"version: '3'\n"))),(0,i.kt)("p",null,"services:\njenkins:\nimage: jenkinsci/blueocean\nuser: root\nvolumes:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'  - "./data:/var/jenkins_home"\n  - "./default.json:/var/lib/jenkins/updates/default.json"\n  - "/var/run/docker.sock:/var/run/docker.sock"\nports:\n  - "8080:8080"\n  - "50000:50000"\ncontainer_name: "jenkins"\n')),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"&emsp;\u4fdd\u5b58\u597d\u540e,\u76f4\u63a5\u542f\u52a8`docker-composer up`\u5565\u53c2\u6570\u90fd\u4e0d\u7528\u8bb0\u4e86\n")))}m.isMDXComponent=!0}}]);