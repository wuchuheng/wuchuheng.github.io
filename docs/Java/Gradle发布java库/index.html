<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-Java/Gradle发布java库">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.21">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="wuchuheng&#39;s notes RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="wuchuheng&#39;s notes Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="wuchuheng&#39;s notes" href="/opensearch.xml">

<link rel="icon" href="/img/icons-96x96.png">
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="rgb(37, 194, 160)"><title data-rh="true">18.Gradle如何发布Java库? | wuchuheng&#x27;s notes</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://wuchuheng.com/docs/Java/Gradle发布java库"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="18.Gradle如何发布Java库? | wuchuheng&#x27;s notes"><meta data-rh="true" name="description" content="1 本文的目标是什么?"><meta data-rh="true" property="og:description" content="1 本文的目标是什么?"><link data-rh="true" rel="icon" href="/img/icons.ico"><link data-rh="true" rel="canonical" href="https://wuchuheng.com/docs/Java/Gradle发布java库"><link data-rh="true" rel="alternate" href="https://wuchuheng.com/docs/Java/Gradle发布java库" hreflang="en"><link data-rh="true" rel="alternate" href="https://wuchuheng.com/docs/Java/Gradle发布java库" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://IEGAUEEF24-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.d7138823.css">
<link rel="preload" href="/assets/js/runtime~main.17f5a766.js" as="script">
<link rel="preload" href="/assets/js/main.3144a24f.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_GEtQ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/icons-96x96.png" alt="wuchuheng&#x27;s notes" class="themedImage_s8Bq themedImage--light_buRq"><img src="/img/icons-96x96.png" alt="wuchuheng&#x27;s notes" class="themedImage_s8Bq themedImage--dark_x8QA"></div><b class="navbar__title text--truncate">wuchuheng&#x27;s notes</b></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Docs</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/docs/myLiberies">MyLibraries</a><a class="navbar__item navbar__link" href="/emailMarkdown">EmailMarkdown</a><a class="navbar__item navbar__link" href="/tools">Tools</a><a class="navbar__item navbar__link" href="/docs/收录优秀的开源库">libraries</a><a class="navbar__item navbar__link" href="/todos">Todos</a><a class="navbar__item navbar__link" href="/docs/收录vim插件库/">Vim</a><a class="navbar__item navbar__link" href="/docs/book">Books</a><a class="navbar__item navbar__link" href="/docs/友情链接收录">FriendlyLinks</a><a href="https://github.com/wuchuheng/wuchuheng.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_u8yp"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_laBg colorModeToggle_k9sj"><button class="clean-btn toggleButton_uF92 toggleButtonDisabled_DKrM" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_d3re"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_XhYN"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_mr3D"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docsWrapper_AfUv"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_C3mU" type="button"></button><div class="docPage_J177"><aside class="theme-doc-sidebar-container docSidebarContainer_L9Bb"><div class="sidebar_Mohb"><nav class="menu thin-scrollbar menu_bwhX"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Tutorial Intro</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Git/基本配置">01 Git</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Linux/基础用法">02 Linux</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Mysql/基础知识">03 Mysql</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Nginx/申请并配置网站的SSL证书">04 Nginx</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Vim/基本使用">05 Vim</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/正则/常用示例收集">06 正则</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/算法/冒泡从小到大排序">07 算法</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Web相关/DOM/JQ和JS原生选择器">08 Web相关</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/Java/什么是Java">09 Java</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Java/什么是Java">0.1什么是Java?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Java/基础知识">0.2基础知识</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Java/SprintBoot异常处理">03.SprintBoot异常处理</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Java/springBoot的意图和注解">04.springBoot的意图和注解</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Java/springBoot验证器的使用">05.springBoot验证器的使用</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Java/springBoot配置">06.springBoot配置</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Java/springBootJpa">07.springBootJpa</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Java/Idea热更新">08 Idea 热更新</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Java/accessingDataWithJPA">10 Accessing Data with JPA</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Java/springBoot运行和打包">11 SpringBoot打包</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Java/SpringBoot初始化枚举配置">12 SpringBoot初始化枚举配置</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Java/JPA一对多和多对一">13 JPA一对多和多对一</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Java/数据库逆向生成JPA实体">14 数据库逆向生成JPA实体</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Java/jpa日志显示sql和它的参数">15 jpa日志显示sql和它的参数(转载)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Java/Mapstruct类型转换处理框架">16.Mapstruct类型转换处理框架</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Java/JPA双向死循环解决方法">17.JPA双向死循环解决方法</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/Java/Gradle发布java库">18.Gradle如何发布Java库?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Java/关于在java中http的基本使用示例">19 关于在java中http的基本使用示例</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/网络编程/iso网络七层模型以及实现">10 网络编程</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/RaspberryPi/烧录系统">11 RaspberryPi</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/PHP/模型和ORM">12 PHP</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/CICD/啥是CI-CD">13 CI/CD</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/应用部署/邮件服务部署">14 应用部署</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/鉴权或加密解密/JWT鉴权">15 鉴权或加密解密</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/测试/压力测试">16 测试</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Python/入门笔记">17 Python</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Golang/mod的使用">18 Golang</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/NativeApp/19.1.FlutterAPP/环境配置">19 Native App</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Mac/mac使用小结">20 Macbook os的使用</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/GraphQL/SpringBootGraphQLTutorial/introduction">21 GraphQL</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/语种/英语/常见缩写收录">22 语种</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/管理知识/01任务分配原则">23 管理知识</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/物联网/什么是物联网">24 物联网(IOT)</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/数据处理/获取动态网页数据">25 数据处理</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Rust/什么是rust">26 Rust</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/玩一把大的/基于imap与smtp的去中心化数据通讯和缓存的设想 — 普通人去中心化的一小步">27 玩一把大的</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Lua/Table转换为JSON的算法实现">28 Lua</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Email/IMAP的TLS抓包">29 Email</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Macos/隐藏titleBar配置">30 Macos</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/开发环境/Vagrant本地导入">31 开发环境</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/CLang/Makefile的基本使用">32 C language</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/玩机/安卓尝试root记录">33 玩机</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/乐理/什么是音乐">34 乐理</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/myLiberies">92 我的工具库</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/那些年挖的坑">93 那年我挖的坑</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Gists代码片段收录">94 Gists代码片段收录</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/软件工程初始化注意事项">95 软件工程初始化注意事项</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/收录优秀的开源库">96 收录优秀的开源库</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/awsomeProjects">98 收录优秀的开源项目</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/收录优秀开源开发框架">99 收录优秀开源开发框架</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/book">100 收录开源书籍</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/友情链接收录">101 友情链接收录</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/收录vim插件库">102 收录vim插件库和dotfile</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/resume">103 Resume</a></li></ul></nav></div></aside><main class="docMainContainer_FKaF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_kJdR"><div class="docItemContainer_PbFd"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_L6fZ" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_vyIq"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">09 Java</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">18.Gradle如何发布Java库?</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_nVlS theme-doc-toc-mobile tocMobile_nBq5"><button type="button" class="clean-btn tocCollapsibleButton_eObO">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>18.Gradle如何发布Java库?</h1></header><h2 class="anchor anchorWithStickyNavbar_wVXI" id="1-本文的目标是什么">1 本文的目标是什么?<a class="hash-link" href="#1-本文的目标是什么" title="Direct link to heading">​</a></h2><ul><li>创建一个<code>java</code>库</li><li>发布到<code>mvnrepository</code></li></ul><h2 class="anchor anchorWithStickyNavbar_wVXI" id="2-准备工作">2 准备工作<a class="hash-link" href="#2-准备工作" title="Direct link to heading">​</a></h2><table><thead><tr><th>名称</th><th>必要</th><th>文中示例</th><th>说明</th></tr></thead><tbody><tr><td>java</td><td>✅</td><td>java17</td><td>如果没有可以去<a href="https://www.oracle.com/java/technologies/downloads" target="_blank" rel="noopener noreferrer">官网</a>下载。</td></tr><tr><td>邮箱</td><td>✅</td><td><a href="mailto:root@wuchuheng.cn" target="_blank" rel="noopener noreferrer">root@wuchuheng.cn</a></td><td>用于注册<a href="https://issues.sonatype.org" target="_blank" rel="noopener noreferrer">sonatype</a>和<code>GPG</code>密钥生成</td></tr><tr><td>域名</td><td>✅</td><td>wuchuheng.cn</td><td>用于申请<code>cn.wuchuheng</code>的groupId`</td></tr><tr><td><code>GPG</code></td><td>✅</td><td><a href="https://gpgtools.org" target="_blank" rel="noopener noreferrer">gpg</a></td><td>用于生成非对称公钥和私钥，并上传公钥出去，这样平来在发布自己的包时，对其进行加密，防止被中间人篡改</td></tr><tr><td><code>Gradle</code></td><td>✅</td><td><code>Gradle 7.5</code></td><td>包的生成初始化生成和包的发布都是需要这个工具来完成</td></tr><tr><td>github仓库</td><td>✅</td><td><a href="https://github.com/wuchuheng/gradle-libery-demo-java" target="_blank" rel="noopener noreferrer"><code>gradle-libery-demo-java</code></a></td><td>创建一个空仓库，用于存放代码和申请<code>groupId</code>时填写表单使用</td></tr><tr><td>Git</td><td>✅</td><td></td><td>版本控制工具，用于保存代码使用</td></tr><tr><td>base64</td><td>✅</td><td></td><td>base64是一个把二进制数据编码成字符串的工具,本文中用于转换<code>GPG</code>二进制私钥为base64文本</td></tr><tr><td>编辑器</td><td>❌</td><td><code>IntelliJ IDEA</code></td><td>准备一个编辑器，用的顺手就行</td></tr><tr><td>OS</td><td>❌</td><td><code>Mac OS 12</code></td><td>演示使用的操作系统</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_wVXI" id="3-获取sonatype仓库的发包许可">3 获取sonatype仓库的发包许可<a class="hash-link" href="#3-获取sonatype仓库的发包许可" title="Direct link to heading">​</a></h2><p>当我们把<code>java</code>库打包出来后，想要发布到公共的仓库才能为他人所用时，我们需要获取仓库的发布许可，包才有可以上传上去。所以我们需要创建创建一个
<a href="https://issues.sonatype.org/" target="_blank" rel="noopener noreferrer"><code>sonatype</code></a>账号, 并获取发包的许可。</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>为什么要这么做?</h5></div><div class="admonition-content"><p>当我们把包发布到<a href="https://issues.sonatype.org/" target="_blank" rel="noopener noreferrer"><code>sonatype</code></a>的仓库后，这些包确认没有问题，可以正式公布出去时，便可以同步到<code>mvnrepository</code>。
这要其他人也可以发布我们所发布的包，从而下载并使用它们.</p></div></div><h3 class="anchor anchorWithStickyNavbar_wVXI" id="31-注册sonatypeossrh账号">3.1 注册sonatype(OSSRH)账号<a class="hash-link" href="#31-注册sonatypeossrh账号" title="Direct link to heading">​</a></h3><blockquote><p>去<a href="https://issues.sonatype.org/secure/Signup!default.jspa" target="_blank" rel="noopener noreferrer">issues.sonatype.org</a>注册一个账号.</p></blockquote><details class="details_u_g4 alert alert--info details_EK4R" data-collapsed="true"><summary>注册、登录、语言向导截图</summary><div><div class="collapsibleContent_cV8I"><blockquote><p>注册</p><div style="display:flex;justify-content:center;align-items:center;justify-items:center"><img src="https://qiniu.wuchuheng.com/images/WX20221115-130426.png" alt="Gradle发布Java库到mvnrepository"></div></blockquote><blockquote><p>登录</p><div style="display:flex;justify-content:center;align-items:center;justify-items:center"><img src="https://qiniu.wuchuheng.com/images/howToPublishJavaLiberyToMvn1.png" alt="Gradle发布Java库到mvnrepository"></div></blockquote><blockquote><p>新手向导</p><div style="display:flex;justify-content:center;align-items:center;justify-items:center"><img src="https://qiniu.wuchuheng.com/images/howToPublishJavaLiberyToMvn2.png" alt="Gradle发布Java库到mvnrepository"></div></blockquote></div></div></details><h3 class="anchor anchorWithStickyNavbar_wVXI" id="32-提交创建项目的issue">3.2 提交创建项目的issue<a class="hash-link" href="#32-提交创建项目的issue" title="Direct link to heading">​</a></h3><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>为什么要提交创建项目的issue?</h5></div><div class="admonition-content"><p>因为我们需要为<code>wuchuheng.cn</code>申请<code>cn.wuchuheng</code>的<code>groupId</code></p></div></div><p>在创建<code>issue</code>时,在表单中需要填写:</p><ol><li>project 选择: Community Support - Open Source Project Repository Hosting (OSSRH)</li><li>Issue Type: Improvement</li><li>Summary: Create repository for <!-- -->[你的域名倒置]</li><li>Group Id: <!-- -->[你的域名倒置]</li><li>Project URL: 写上你的代码仓库链接，如: <a href="https://github.com/wuchuheng/gradle-libery-demo-java" target="_blank" rel="noopener noreferrer">https://github.com/wuchuheng/gradle-libery-demo-java</a></li><li>SMC URL: 写上你的代码仓库链接，如: <a href="https://github.com/wuchuheng/gradle-libery-demo-java" target="_blank" rel="noopener noreferrer">https://github.com/wuchuheng/gradle-libery-demo-java</a></li><li>创建Issue</li></ol><details class="details_u_g4 alert alert--info details_EK4R" data-collapsed="true"><summary>创建Issue截图</summary><div><div class="collapsibleContent_cV8I"><blockquote><p>创建Issue</p></blockquote><div style="display:flex;justify-content:center;align-items:center;justify-items:center"><img src="https://qiniu.wuchuheng.com/images/https-%3A%3Aqiniu.wuchuheng.com%3Aimages%3AhowToPublishJavaLiberyToMvn3.png" alt="Gradle发布Java库到mvnrepository"></div><blockquote><p>填写Issue表单</p></blockquote><div style="display:flex;justify-content:center;align-items:center;justify-items:center"><img src="https://qiniu.wuchuheng.com/images/howToCreateAJavaLiberyAndPublishToMvn2.png" alt="Gradle发布Java库到mvnrepository"></div><div style="display:flex;justify-content:center;align-items:center;justify-items:center"><img src="https://qiniu.wuchuheng.com/images/howToCreateAJavaLiberyAndPublishToMvn4.png" alt="Gradle发布Java库到mvnrepository"></div><blockquote><p>Issue 创建成功</p></blockquote><div style="display:flex;justify-content:center;align-items:center;justify-items:center"><img src="https://qiniu.wuchuheng.com/images/howToCreateAJavaLiberyAndPublishToMvn5.png" alt="Gradle发布Java库到mvnrepository"></div></div></div></details><h3 class="anchor anchorWithStickyNavbar_wVXI" id="33-等待审核机器人回复issue">3.3 等待审核机器人回复Issue<a class="hash-link" href="#33-等待审核机器人回复issue" title="Direct link to heading">​</a></h3><p>快的话几分钟，慢的话就再等等. 😂😂😂</p><h3 class="anchor anchorWithStickyNavbar_wVXI" id="34-添加txt域名解析">3.4 添加TXT域名解析<a class="hash-link" href="#34-添加txt域名解析" title="Direct link to heading">​</a></h3><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>根据帖子的回复内容: 需要用<code>wuchuheng.cn</code>添加一个TXT域名解析,参数值为:OSSRH-86264</h5></div><div class="admonition-content"><div style="display:flex;justify-content:center;align-items:center;justify-items:center"><img src="https://qiniu.wuchuheng.com/images/howToCreateAJavaLiberyAndPublishToMvn6.png" alt="Gradle发布Java库到mvnrepository" style="width:40rem"></div></div></div><blockquote><p>这需要去找域名服务提供商进行解析配置。比如我的域名服务来自阿里云，同理就找阿里云添加相关配置。</p></blockquote><details class="details_u_g4 alert alert--info details_EK4R" data-collapsed="true"><summary>阿里云添加TXT记录示例</summary><div><div class="collapsibleContent_cV8I"><div style="display:flex;justify-content:center;align-items:center;justify-items:center"><img src="https://qiniu.wuchuheng.com/images/howToCreateAJavaLiberyAndPublishToMvn7.png" alt="Gradle发布Java库到mvnrepository"></div></div></div></details><h3 class="anchor anchorWithStickyNavbar_wVXI" id="35-回复issue并告知对方txt记录已添加">3.5 回复Issue并告知对方Txt记录已添加<a class="hash-link" href="#35-回复issue并告知对方txt记录已添加" title="Direct link to heading">​</a></h3><div style="display:flex;justify-content:center;align-items:center;justify-items:center"><img src="https://qiniu.wuchuheng.com/images/howToCreateAJavaLiberyAndPublishToMvn8.png" alt="Gradle发布Java库到mvnrepository" style="width:40rem"></div><blockquote><p>然后等待对方回复.也许几分钟吧. 😂😂😂</p></blockquote><h3 class="anchor anchorWithStickyNavbar_wVXI" id="36-完成仓库的发包许可">3.6 完成仓库的发包许可<a class="hash-link" href="#36-完成仓库的发包许可" title="Direct link to heading">​</a></h3><div style="display:flex;justify-content:center;align-items:center;justify-items:center"><img src="https://qiniu.wuchuheng.com/images/howToCreateAJavaLiberyAndPublishToMvn9.png" alt="Gradle发布Java库到mvnrepository" style="width:40rem"></div><blockquote><p>从对方的回复中，本账号已经被允许上传包到<a href="https://s01.oss.sonatype.org/" target="_blank" rel="noopener noreferrer"><code>s01.oss.sonatype.org</code></a>中。而后面我们制作出来的<code>artifacts</code>便是提交到这个仓库中的。
至此，包的发布渠道问题算是解决了.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_wVXI" id="4-初始化gpg密钥以用于发包时对包进行加密">4 初始化GPG密钥以用于发包时对包进行加密<a class="hash-link" href="#4-初始化gpg密钥以用于发包时对包进行加密" title="Direct link to heading">​</a></h2><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>什么是GPG?为什么要在发包时使用它？起到什么作用?</h5></div><div class="admonition-content"><p>GPG是一个非对称密钥生成和管理工具。它通常的一个使用方式就是生成密钥对，公钥和私钥. 然后使用者上传它的公钥到公网上公布自己的公钥为他人所知,而私钥自己保存。
然后就可以用另一个私钥，对文件进行加密，然后把文件发送给其他人，由于是非对称加密，中间人无法对其进行篡改，而使用者只需要去下载公布出来的密钥就可以解密文件的内容了。</p><p>而使用加密就是为了确保发包时，不被中间人所篡改。</p></div></div><h3 class="anchor anchorWithStickyNavbar_wVXI" id="41-生成密钥">4.1 生成密钥<a class="hash-link" href="#41-生成密钥" title="Direct link to heading">​</a></h3><div class="language-sh codeBlockContainer_BUZR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_FguA">生成密钥</div><div class="codeBlockContent_n4dD"><pre tabindex="0" class="prism-code language-sh codeBlock_i7dA thin-scrollbar"><code class="codeBlockLines_vRyG"><span class="token-line" style="color:#393A34"><span class="token plain">$ gpg --generate-key</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gpg (GnuPG/MacGPG2) 2.2.40; Copyright (C) 2022 g10 Code GmbH</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">This is free software: you are free to change and redistribute it.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">There is NO WARRANTY, to the extent permitted by law.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Note: Use &quot;gpg --full-generate-key&quot; for a full featured key generation dialog.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GnuPG needs to construct a user ID to identify your key.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">Real name: wuchuhengcn # &lt;-- 输入用户名</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">Email address: root@wuchuheng.cn # &lt;-- 输入邮箱</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">You selected this USER-ID:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;wuchuhengcn &lt;root@wuchuheng.cn&gt;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">Change (N)ame, (E)mail, or (O)kay/(Q)uit? o # &lt;-- 选择o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">We need to generate a lot of random bytes. It is a good idea to perform</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">some other action (type on the keyboard, move the mouse, utilize the</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">disks) during the prime generation; this gives the random number</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">generator a better chance to gain enough entropy.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">We need to generate a lot of random bytes. It is a good idea to perform</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">some other action (type on the keyboard, move the mouse, utilize the</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">disks) during the prime generation; this gives the random number</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">generator a better chance to gain enough entropy.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gpg: revocation certificate stored as &#x27;/Users/wuchuheng/.gnupg/openpgp-revocs.d/30D55DBBAF2D0F957FC5AA9347BF092C7C49CDB8.rev&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public and secret key created and signed.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pub   rsa3072 2022-11-15 [SC] [expires: 2024-11-14]</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">      30D55DBBAF2D0F957FC5AA9347BF092C7C49CDB8   #&lt;-- 密钥指纹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">uid                      wuchuhengcn &lt;root@wuchuheng.cn&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sub   rsa3072 2022-11-15 [E] [expires: 2024-11-14]</span><br></span></code></pre><div class="buttonGroup_FzQ2"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MUvd" aria-hidden="true"><svg class="copyButtonIcon_kr8h" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_EbNa" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>输入保存密钥的密码</h5></div><div class="admonition-content"><p>在生成的密钥的过程中要求操作人输入一个密码，用于保存密钥用，输入一个，且不能忘记</p></div></div><h3 class="anchor anchorWithStickyNavbar_wVXI" id="42-把生成的密钥上传到公网上">4.2 把生成的密钥上传到公网上<a class="hash-link" href="#42-把生成的密钥上传到公网上" title="Direct link to heading">​</a></h3><div class="language-bash codeBlockContainer_BUZR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_FguA">上传公钥到公网</div><div class="codeBlockContent_n4dD"><pre tabindex="0" class="prism-code language-bash codeBlock_i7dA thin-scrollbar"><code class="codeBlockLines_vRyG"><span class="token-line" style="color:#393A34"><span class="token plain">$ gpg --keyserver keyserver.ubuntu.com --send-keys </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">输入指纹</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># &lt;-- 上传公钥到 https://keyserver.ubuntu.com/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gpg: sending key 47BF092C7C49CDB8 to hkp://keyserver.ubuntu.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ gpg --keyserver keys.openpgp.org --send-keys </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">输入指纹</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;-- 上传公钥到 https://keys.openpgp.org</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gpg: sending key 47BF092C7C49CDB8 to hkp://keys.openpgp.org</span><br></span></code></pre><div class="buttonGroup_FzQ2"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MUvd" aria-hidden="true"><svg class="copyButtonIcon_kr8h" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_EbNa" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_wVXI" id="43-导出私钥用于发布时加密使用">4.3 导出私钥用于发布时加密使用<a class="hash-link" href="#43-导出私钥用于发布时加密使用" title="Direct link to heading">​</a></h3><blockquote><p>注意: 导出需输入生成密钥时的密码</p></blockquote><div class="language-shell codeBlockContainer_BUZR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_FguA">导出私钥保存于~/root@wuchuheng.cn.gpg</div><div class="codeBlockContent_n4dD"><pre tabindex="0" class="prism-code language-shell codeBlock_i7dA thin-scrollbar"><code class="codeBlockLines_vRyG"><span class="token-line" style="color:#393A34"><span class="token plain">$ gpg --export-secret-keys 30D55DBBAF2D0F957FC5AA9347BF092C7C49CDB8 </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> ~/root@wuchuheng.cn.gpg</span><br></span></code></pre><div class="buttonGroup_FzQ2"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MUvd" aria-hidden="true"><svg class="copyButtonIcon_kr8h" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_EbNa" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_wVXI" id="5-初始化java包">5 初始化java包<a class="hash-link" href="#5-初始化java包" title="Direct link to heading">​</a></h2><div class="language-shell codeBlockContainer_BUZR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_n4dD"><pre tabindex="0" class="prism-code language-shell codeBlock_i7dA thin-scrollbar"><code class="codeBlockLines_vRyG"><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> cn.wuchuheng.tmp </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;-- 创建空目录</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">$ </span><span class="token builtin class-name">cd</span><span class="token plain"> cn.wuchuheng.tmp </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;-- 进入目录</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">$ gradle init </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;-- 开始初始化gradle项目</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Starting a Gradle Daemon </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">subsequent builds will be faster</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Select </span><span class="token builtin class-name">type</span><span class="token plain"> of project to generate:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">: basic</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token number" style="color:#36acaa">2</span><span class="token plain">: application</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token number" style="color:#36acaa">3</span><span class="token plain">: library</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token number" style="color:#36acaa">4</span><span class="token plain">: Gradle plugin</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">Enter selection </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">default: basic</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">..</span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;-- 选择 libery</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Select implementation language:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">: C++</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token number" style="color:#36acaa">2</span><span class="token plain">: Groovy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token number" style="color:#36acaa">3</span><span class="token plain">: Java</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token number" style="color:#36acaa">4</span><span class="token plain">: Kotlin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token number" style="color:#36acaa">5</span><span class="token plain">: Scala</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token number" style="color:#36acaa">6</span><span class="token plain">: Swift</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">Enter selection </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">default: Java</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">..</span><span class="token number" style="color:#36acaa">6</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">#&lt;-- 选择java</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Select build script DSL:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">: Groovy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token number" style="color:#36acaa">2</span><span class="token plain">: Kotlin</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">Enter selection </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">default: Groovy</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">..</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">Generate build using new APIs and behavior </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">some features may change </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> the next minor release</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">? </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">default: no</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">yes, no</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">#&lt;-- 回车默认</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Select </span><span class="token builtin class-name">test</span><span class="token plain"> framework:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">: JUnit </span><span class="token number" style="color:#36acaa">4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token number" style="color:#36acaa">2</span><span class="token plain">: TestNG</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token number" style="color:#36acaa">3</span><span class="token plain">: Spock</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token number" style="color:#36acaa">4</span><span class="token plain">: JUnit Jupiter</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">Enter selection </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">default: JUnit Jupiter</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">..</span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">Please enter a value between </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> and </span><span class="token number" style="color:#36acaa">4</span><span class="token plain">: </span><span class="token number" style="color:#36acaa">4</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">#&lt;-- 选择 JUnit Jupiter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">Project name </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">default: cn.wuchuheng.tmp</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">:  </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;-- 回车</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Source package </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">default: cn.wuchuheng.tmp</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> Task :init</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Get </span><span class="token function" style="color:#d73a49">more</span><span class="token plain"> </span><span class="token builtin class-name">help</span><span class="token plain"> with your project: https://docs.gradle.org/7.5.1/samples/sample_building_java_libraries.html</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BUILD SUCCESSFUL </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> 23h 53m 5s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> init </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;-- 初始化git项目</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">$ g </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> -A </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;-- 把全部文件添加到git中</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">$ g commit -m init </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;-- 提交下git</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">master </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">root-commit</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> 32cf1cc</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> init</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token plain"> files changed, </span><span class="token number" style="color:#36acaa">418</span><span class="token plain"> insertions</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">+</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> create mode </span><span class="token number" style="color:#36acaa">100644</span><span class="token plain"> .gitattributes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> create mode </span><span class="token number" style="color:#36acaa">100644</span><span class="token plain"> .gitignore</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> create mode </span><span class="token number" style="color:#36acaa">100644</span><span class="token plain"> gradle/wrapper/gradle-wrapper.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> create mode </span><span class="token number" style="color:#36acaa">100644</span><span class="token plain"> gradle/wrapper/gradle-wrapper.properties</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> create mode </span><span class="token number" style="color:#36acaa">100755</span><span class="token plain"> gradlew</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> create mode </span><span class="token number" style="color:#36acaa">100644</span><span class="token plain"> gradlew.bat</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> create mode </span><span class="token number" style="color:#36acaa">100644</span><span class="token plain"> lib/build.gradle</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> create mode </span><span class="token number" style="color:#36acaa">100644</span><span class="token plain"> lib/src/main/java/cn/wuchuheng/tmp/Library.java</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> create mode </span><span class="token number" style="color:#36acaa">100644</span><span class="token plain"> lib/src/test/java/cn/wuchuheng/tmp/LibraryTest.java</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> create mode </span><span class="token number" style="color:#36acaa">100644</span><span class="token plain"> settings.gradle</span><br></span></code></pre><div class="buttonGroup_FzQ2"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MUvd" aria-hidden="true"><svg class="copyButtonIcon_kr8h" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_EbNa" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><details class="details_u_g4 alert alert--info details_EK4R" data-collapsed="true"><summary>初始化后的gradle库项目目录结构</summary><div><div class="collapsibleContent_cV8I"><div class="language-shell codeBlockContainer_BUZR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_n4dD"><pre tabindex="0" class="prism-code language-shell codeBlock_i7dA thin-scrollbar"><code class="codeBlockLines_vRyG"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── gradle</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     └── wrapper</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│         ├── gradle-wrapper.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│         └── gradle-wrapper.properties</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── gradlew</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── gradlew.bat</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── lib</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     ├── build.gradle</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     └── src</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│         ├── main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│         │     ├── java</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│         │     │     └── cn</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│         │     │         └── wuchuheng</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│         │     │             └── tmp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│         │     │                 └── Library.java</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│         │     └── resources</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│         └── </span><span class="token builtin class-name">test</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             ├── java</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             │     └── cn</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             │         └── wuchuheng</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             │             └── tmp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             │                 └── LibraryTest.java</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             └── resources</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── settings.gradle</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_FzQ2"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MUvd" aria-hidden="true"><svg class="copyButtonIcon_kr8h" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_EbNa" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><h2 class="anchor anchorWithStickyNavbar_wVXI" id="6-发布相关包的配置">6 发布相关包的配置<a class="hash-link" href="#6-发布相关包的配置" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_wVXI" id="61-配置gradle配置文件">6.1 配置Gradle配置文件<a class="hash-link" href="#61-配置gradle配置文件" title="Direct link to heading">​</a></h3><p>用<code>idea</code>打开项目，然后配置<code>lib/build.gradle</code>.</p><div class="language-groovy codeBlockContainer_BUZR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_FguA">lib/build.gradle</div><div class="codeBlockContent_n4dD"><pre tabindex="0" class="prism-code language-groovy codeBlock_i7dA thin-scrollbar"><code class="codeBlockLines_vRyG"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">/*</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * This file was generated by the Gradle &#x27;init&#x27; task.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> *</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * This generated file contains a sample Java library project to get you started.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * For more details take a look at the &#x27;Building Java &amp; JVM projects&#x27; chapter in the Gradle</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * User Manual available at https://docs.gradle.org/7.5.1/userguide/building_java_projects.html</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">plugins </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Apply the java-library plugin for API and implementation separation.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    id </span><span class="token string" style="color:#e3116c">&#x27;java-library&#x27;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 1 添加相关插件</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    id </span><span class="token string" style="color:#e3116c">&#x27;maven-publish&#x27;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    id </span><span class="token string" style="color:#e3116c">&#x27;signing&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 2 定义要发行的版本号</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">version </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token interpolation-string string" style="color:#e3116c">&quot;0.0.1&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">repositories </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Use Maven Central for resolving dependencies.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">mavenCentral</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">publishing </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 3 发行的包的相关信息说明</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    publications </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">mavenJava</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">MavenPublication</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// 这个填写我们申请的groupId,即: cn.wuchuheng</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">            groupId </span><span class="token operator" style="color:#393A34">=</span><span class="token interpolation-string string" style="color:#e3116c">&quot;cn.wuchuheng&quot;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// 这个是制品id, 起到包名的作用</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">            artifactId </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token interpolation-string string" style="color:#e3116c">&quot;tmp&quot;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">            </span><span class="token function" style="color:#d73a49">from</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">components</span><span class="token punctuation" style="color:#393A34">[</span><span class="token interpolation-string string" style="color:#e3116c">&quot;java&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">            pom </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">                </span><span class="token comment" style="color:#999988;font-style:italic">// 同artifactId一样即可</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">                name</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token interpolation-string string" style="color:#e3116c">&quot;tmp&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">                description</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token interpolation-string string" style="color:#e3116c">&quot;库的使用简要说明...&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">                url</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token interpolation-string string" style="color:#e3116c">&quot;https://wuchuheng.cn&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 库的官方文档</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">                inceptionYear</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token interpolation-string string" style="color:#e3116c">&quot;2022&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">                developers </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">                    developer </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">                        </span><span class="token comment" style="color:#999988;font-style:italic">// 开发者信息</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">                        id</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token interpolation-string string" style="color:#e3116c">&quot;wuchuhengcn&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">                        name</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token interpolation-string string" style="color:#e3116c">&quot;wuchuhengcn&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">                        email</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token interpolation-string string" style="color:#e3116c">&quot;root@wuchuheng.cn&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">                    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">                </span><span class="token comment" style="color:#999988;font-style:italic">// 协议信息</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">                licenses </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">                    license </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">                        name</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token interpolation-string string" style="color:#e3116c">&quot;MIT&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">                        url</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token interpolation-string string" style="color:#e3116c">&quot;https://github.com/wuchuheng/gradle-libery-demo-java&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">                        distribution</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token interpolation-string string" style="color:#e3116c">&quot;repo&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">                    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">                </span><span class="token comment" style="color:#999988;font-style:italic">// 源代码仓库信息</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">                scm </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">                    url</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token interpolation-string string" style="color:#e3116c">&quot;https://github.com/wuchuheng/gradle-libery-demo-java&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">                    connection</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token interpolation-string string" style="color:#e3116c">&quot;scm:git:git@github.com:wuchuheng/gradle-libery-demo-java.git&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">                    developerConnection</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token interpolation-string string" style="color:#e3116c">&quot;scm:git:ssh:git@github.com:wuchuheng/gradle-libery-demo-java.git&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    repositories </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 4 要上传的仓库信息</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">        maven </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">            name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token interpolation-string string" style="color:#e3116c">&quot;OSSRH&quot;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">            credentials </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">                username </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token interpolation-string string" style="color:#e3116c">&quot;wuchuhengcn&quot;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">                password </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token interpolation-string string" style="color:#e3116c">&quot;[写上仓库的密码]&quot;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// 根据版本名中是否以&quot;SNAPSHOT&quot;为结尾，则上传到&quot;SNAPSHOT&quot;仓库，通常作为开发测试使用，反之则正式版本使用</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">project</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">version</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">toString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">endsWith</span><span class="token punctuation" style="color:#393A34">(</span><span class="token interpolation-string string" style="color:#e3116c">&quot;-SNAPSHOT&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">                url </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token interpolation-string string" style="color:#e3116c">&quot;https://s01.oss.sonatype.org/content/repositories/snapshots&quot;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">                url </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token interpolation-string string" style="color:#e3116c">&quot;https://s01.oss.sonatype.org/service/local/staging/deploy/maven2/&quot;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">signing </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">sign</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">publishing</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">publications</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">mavenJava</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">java </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">withJavadocJar</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">withSourcesJar</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 生成文档。在上传包时，有文档包含要求。</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">javadoc </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">addStringOption</span><span class="token punctuation" style="color:#393A34">(</span><span class="token interpolation-string string" style="color:#e3116c">&quot;charset&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token interpolation-string string" style="color:#e3116c">&quot;UTF-8&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">JavaVersion</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">current</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">isJava9Compatible</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">        options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">addBooleanOption</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;html5&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dependencies </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Use JUnit Jupiter for testing.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    testImplementation </span><span class="token string" style="color:#e3116c">&#x27;org.junit.jupiter:junit-jupiter:5.8.2&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// This dependency is exported to consumers, that is to say found on their compile classpath.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    api </span><span class="token string" style="color:#e3116c">&#x27;org.apache.commons:commons-math3:3.6.1&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// This dependency is used internally, and not exposed to consumers on their own compile classpath.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    implementation </span><span class="token string" style="color:#e3116c">&#x27;com.google.guava:guava:31.0.1-jre&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tasks</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">named</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;test&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Use JUnit Platform for unit tests.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">useJUnitPlatform</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_FzQ2"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MUvd" aria-hidden="true"><svg class="copyButtonIcon_kr8h" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_EbNa" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>配置好后就点击重置右上角的<code>gradle</code>的重载配置按键，使配置生效.</p></blockquote><details class="details_u_g4 alert alert--info details_EK4R" data-collapsed="true"><summary>操作截图</summary><div><div class="collapsibleContent_cV8I"><div style="display:flex;justify-content:center;align-items:center;justify-items:center"><img src="https://qiniu.wuchuheng.com/howToPublishJavaLiberyToMvn11.png" alt="Gradle发布Java库到mvnrepository" style="width:40rem"></div></div></div></details><h3 class="anchor anchorWithStickyNavbar_wVXI" id="61-编写包的代码">6.1 编写包的代码<a class="hash-link" href="#61-编写包的代码" title="Direct link to heading">​</a></h3><div class="language-java codeBlockContainer_BUZR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_FguA">lib/src/main/java/cn/wuchuheng/tmp/Library.java</div><div class="codeBlockContent_n4dD"><pre tabindex="0" class="prism-code language-java codeBlock_i7dA thin-scrollbar"><code class="codeBlockLines_vRyG"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">/*</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * This Java source file was generated by the Gradle &#x27;init&#x27; task.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">package</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">cn</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">wuchuheng</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">tmp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * Library {</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">Library</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">Library</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     *  Print message.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">printMessage</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Are you ok?&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     * someLibraryMethod</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     *</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     * @return boolean</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">boolean</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">someLibraryMethod</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_FzQ2"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MUvd" aria-hidden="true"><svg class="copyButtonIcon_kr8h" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_EbNa" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_wVXI" id="7-手动发布">7 手动发布<a class="hash-link" href="#7-手动发布" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_wVXI" id="71-生成发布包">7.1 生成发布包<a class="hash-link" href="#71-生成发布包" title="Direct link to heading">​</a></h3><div class="language-shell codeBlockContainer_BUZR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_FguA">项目根目录下</div><div class="codeBlockContent_n4dD"><pre tabindex="0" class="prism-code language-shell codeBlock_i7dA thin-scrollbar"><code class="codeBlockLines_vRyG"><span class="token-line" style="color:#393A34"><span class="token plain">$  ./gradlew buildg </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;-- 打包</span><br></span></code></pre><div class="buttonGroup_FzQ2"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MUvd" aria-hidden="true"><svg class="copyButtonIcon_kr8h" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_EbNa" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><details class="details_u_g4 alert alert--info details_EK4R" data-collapsed="true"><summary>打包出来的文件</summary><div><div class="collapsibleContent_cV8I"><div class="language-bash codeBlockContainer_BUZR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_FguA">lib/build</div><div class="codeBlockContent_n4dD"><pre tabindex="0" class="prism-code language-bash codeBlock_i7dA thin-scrollbar"><code class="codeBlockLines_vRyG"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── classes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│         └── java</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             ├── main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             │         └── cn</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             │             └── wuchuheng</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             │                 └── tmp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             │                     └── Library.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             └── </span><span class="token builtin class-name">test</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                 └── cn</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                     └── wuchuheng</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                         └── tmp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                             └── LibraryTest.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── docs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│         └── javadoc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             ├── allclasses-index.html</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             ├── allpackages-index.html</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             ├── cn</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             │         └── wuchuheng</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             │             └── tmp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             │                 ├── Library.html</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             │                 ├── package-summary.html</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             │                 └── package-tree.html</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             ├── copy.svg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             ├── element-list</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             ├── help-doc.html</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             ├── index-all.html</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             ├── index.html</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             ├── jquery-ui.overrides.css</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             ├── legal</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             │         ├── COPYRIGHT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             │         ├── LICENSE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             │         ├── jquery.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             │         └── jqueryUI.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             ├── member-search-index.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             ├── module-search-index.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             ├── overview-tree.html</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             ├── package-search-index.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             ├── resources</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             │         ├── glass.png</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             │         └── x.png</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             ├── script-dir</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             │         ├── jquery-3.6.0.min.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             │         ├── jquery-ui.min.css</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             │         └── jquery-ui.min.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             ├── script.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             ├── search-page.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             ├── search.html</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             ├── search.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             ├── stylesheet.css</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             ├── tag-search-index.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             └── type-search-index.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── generated</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│         └── sources</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             ├── annotationProcessor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             │         └── java</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             │             ├── main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             │             └── </span><span class="token builtin class-name">test</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             └── headers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                 └── java</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                     ├── main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                     └── </span><span class="token builtin class-name">test</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── libs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│         ├── lib-0.0.1-javadoc.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│         ├── lib-0.0.1-sources.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│         └── lib-0.0.1.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── reports</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│         └── tests</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             └── </span><span class="token builtin class-name">test</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                 ├── classes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                 │         └── cn.wuchuheng.tmp.LibraryTest.html</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                 ├── css</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                 │         ├── base-style.css</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                 │         └── style.css</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                 ├── index.html</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                 ├── js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                 │         └── report.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                 └── packages</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                     └── cn.wuchuheng.tmp.html</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── test-results</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│         └── </span><span class="token builtin class-name">test</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             ├── TEST-cn.wuchuheng.tmp.LibraryTest.xml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             └── binary</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                 ├── output.bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                 ├── output.bin.idx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                 └── results.bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── tmp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── compileJava</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│         └── previous-compilation-data.bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── compileTestJava</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│         └── previous-compilation-data.bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│         └── MANIFEST.MF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── javadoc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│         └── javadoc.options</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── javadocJar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│         └── MANIFEST.MF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── sourcesJar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│         └── MANIFEST.MF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── </span><span class="token builtin class-name">test</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">47</span><span class="token plain"> directories, </span><span class="token number" style="color:#36acaa">52</span><span class="token plain"> files</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_FzQ2"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MUvd" aria-hidden="true"><svg class="copyButtonIcon_kr8h" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_EbNa" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><h3 class="anchor anchorWithStickyNavbar_wVXI" id="72-上传到仓库中">7.2 上传到仓库中<a class="hash-link" href="#72-上传到仓库中" title="Direct link to heading">​</a></h3><p>在发包时需要采用<code>GPG</code>加密来发布。 需要使用3个参数:</p><ul><li><code>Psigning.keyId</code>: <code>GPG</code>的指纹的后8位数如: 如本文生成的指纹为: 30D55DBBAF2D0F957FC5AA9347BF092C7C49CDB8， 后8位则是: 7C49CDB8</li><li><code>Psigning.password</code>: <code>GPG</code>的私钥的密码，用于保护私钥,使用时必须要有密码配合使用才行</li><li><code>-Psigning.secretKeyRingFile</code>: <code>GPG</code>的私钥的路径，本文这私钥导出为<code>~/root@wuchuheng.cn.gpg</code></li></ul><blockquote><p>使用<code>GPG</code>加密就是为了防止在发布时，被中间方私自篡改。</p></blockquote><div class="language-bash codeBlockContainer_BUZR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_FguA">项目要目录下</div><div class="codeBlockContent_n4dD"><pre tabindex="0" class="prism-code language-bash codeBlock_i7dA thin-scrollbar"><code class="codeBlockLines_vRyG"><span class="token-line" style="color:#393A34"><span class="token plain">$ gradle publish -Psigning.keyId</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">7C49CDB8 -Psigning.password</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">密钥的密码</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> -Psigning.secretKeyRingFile</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable builtin class-name" style="color:#36acaa">echo</span><span class="token variable" style="color:#36acaa"> ~/root@wuchuheng.cn.gpg</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BUILD SUCCESSFUL </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> 24s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">9</span><span class="token plain"> actionable tasks: </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> executed, </span><span class="token number" style="color:#36acaa">6</span><span class="token plain"> up-to-date</span><br></span></code></pre><div class="buttonGroup_FzQ2"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MUvd" aria-hidden="true"><svg class="copyButtonIcon_kr8h" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_EbNa" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_wVXI" id="73-去仓库后台查看刚上传的包">7.3 去仓库后台查看刚上传的包<a class="hash-link" href="#73-去仓库后台查看刚上传的包" title="Direct link to heading">​</a></h3><p>还记得账号申请通过时，对方是怎么回复我们的吗？</p><blockquote><p>Congratulations! Welcome to the Central Repository!
cn.wuchuheng has been prepared, now user(s) wuchuhengcn can:
Publish snapshot and release artifacts to <a href="https://s01.oss.sonatype.org" target="_blank" rel="noopener noreferrer">s01.oss.sonatype.org</a>
Have a look at this section of our official guide for deployment instructions:</p></blockquote><p>是的，它让我们把包上传到这个<a href="https://s01.oss.sonatype.org/" target="_blank" rel="noopener noreferrer">s01.oss.sonatype.org</a>, 我们已经做了;而同样的这个链接也是仓库的后台，
使用我们的之前注册的账号(wuchuhengcn)就能登录上去，查看我们刚才上传的包了</p><div style="display:flex;justify-content:center;align-items:center;justify-items:center"><img src="https://qiniu.wuchuheng.com/howToPublishJavaLiberyToMvn12.png" alt="" style="width:40rem"></div><div style="display:flex;justify-content:center;align-items:center;justify-items:center"><img src="https://qiniu.wuchuheng.com/howToPublishJavaLiberyToMvn13.png" alt="" style="width:40rem"></div><div class="admonition admonition-warning alert alert--danger"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>warning</h5></div><div class="admonition-content"><p>而在这个阶段当中，上传的包还只是待确定状态。后面还要经过一确定和测试才能发布。</p></div></div><h3 class="anchor anchorWithStickyNavbar_wVXI" id="74-正式发布">7.4 正式发布<a class="hash-link" href="#74-正式发布" title="Direct link to heading">​</a></h3><p>正在离我们上传的包正式发布只需:</p><ul><li>选上传的中包</li><li>保存在oss临时库中(在这一阶段可以从该仓库中把包下载回来测试等工作)</li><li>正式发布</li></ul><details class="details_u_g4 alert alert--info details_EK4R" data-collapsed="true"><summary>选上传的中包并保存到临时仓库中</summary><div><div class="collapsibleContent_cV8I"><div style="display:flex;justify-content:center;align-items:center;justify-items:center"><img src="https://qiniu.wuchuheng.com/howToPublishJavaLiberyToMvn14.png" alt="" style="width:40rem"></div><div style="display:flex;justify-content:center;align-items:center;justify-items:center"><img src="https://qiniu.wuchuheng.com/howToPublishJavaLiberyToMvn15.png" alt="" style="width:40rem"></div><blockquote><p>等待处理的状态为&quot;确定&quot;时, 包就会被放置在一个临时的仓库中. 并提供仓库的链接，供开发者把包下载回来并进行测试等开发工作。</p></blockquote></div></div></details><details class="details_u_g4 alert alert--info details_EK4R" data-collapsed="true"><summary>确认发布</summary><div><div class="collapsibleContent_cV8I"><blockquote><p>要是真的没什么问题了， 那么就发布吧</p></blockquote><div style="display:flex;justify-content:center;align-items:center;justify-items:center"><img src="https://qiniu.wuchuheng.com/howToPublishJavaLiberyToMvn16.png" alt="" style="width:40rem"></div><blockquote><p>到这时， <a href="https://repo1.maven.org/maven2/cn/wuchuheng/" target="_blank" rel="noopener noreferrer">https://repo1.maven.org/maven2/cn/wuchuheng/ </a>就是我们上传的包了，现在其它的开发者也都可以使用我们上传的包了。
而<a href="https://mvnrepository.com/repos/central" target="_blank" rel="noopener noreferrer">mvnrepository</a>当然也是会收录这个包的。</p></blockquote></div></div></details><h2 class="anchor anchorWithStickyNavbar_wVXI" id="8-后续小改动">8 后续小改动<a class="hash-link" href="#8-后续小改动" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_wVXI" id="81-解决libbuildgradle配置中账号暴露问题">8.1 解决<code>lib/build.gradle</code>配置中账号暴露问题<a class="hash-link" href="#81-解决libbuildgradle配置中账号暴露问题" title="Direct link to heading">​</a></h3><p>如果我们把账号和密码写进<code>lib/build.gradle</code>中而后提交到代码中，肯定是不行的。解决这一问题，可以用环境变量来解决。</p><div class="language-groovy codeBlockContainer_BUZR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_FguA">用环境变量替代账号和密码</div><div class="codeBlockContent_n4dD"><pre tabindex="0" class="prism-code language-groovy codeBlock_i7dA thin-scrollbar"><code class="codeBlockLines_vRyG"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 4 要上传的仓库信息</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        maven </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token interpolation-string string" style="color:#e3116c">&quot;OSSRH&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            credentials </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                username </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getenv</span><span class="token punctuation" style="color:#393A34">(</span><span class="token interpolation-string string" style="color:#e3116c">&quot;OSSRH_USERNAME&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                password </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getenv</span><span class="token punctuation" style="color:#393A34">(</span><span class="token interpolation-string string" style="color:#e3116c">&quot;OSSRH_PASSWORD&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">...</span><br></span></code></pre><div class="buttonGroup_FzQ2"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MUvd" aria-hidden="true"><svg class="copyButtonIcon_kr8h" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_EbNa" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-shell codeBlockContainer_BUZR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_FguA">而上传包时，需要用密码时，则把账号密码赋值给环境变量</div><div class="codeBlockContent_n4dD"><pre tabindex="0" class="prism-code language-shell codeBlock_i7dA thin-scrollbar"><code class="codeBlockLines_vRyG"><span class="token-line" style="color:#393A34"><span class="token assign-left variable" style="color:#36acaa">OSSRH_USERNAME</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;[仓库的账号]&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">OSSRH_PASSWORD</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;[仓库的密码]&quot;</span><span class="token plain"> gradle publish -Psigning.keyId</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">7C49CDB8 -Psigning.password</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">密钥的密码</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> -Psigning.secretKeyRingFile</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable builtin class-name" style="color:#36acaa">echo</span><span class="token variable" style="color:#36acaa"> ~/root@wuchuheng.cn.gpg</span><span class="token variable" style="color:#36acaa">)</span><br></span></code></pre><div class="buttonGroup_FzQ2"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MUvd" aria-hidden="true"><svg class="copyButtonIcon_kr8h" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_EbNa" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>好了，到了这一步，我们终于可以放心地提交代码而不用担心账号被泄漏的问题了。</p><div class="language-shell codeBlockContainer_BUZR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_n4dD"><pre tabindex="0" class="prism-code language-shell codeBlock_i7dA thin-scrollbar"><code class="codeBlockLines_vRyG"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> commit -m </span><span class="token string" style="color:#e3116c">&#x27;feat: 实现发布制品到OSSRH&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">master f435998</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> feat: 实现发布制品到OSSRH</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> files changed, </span><span class="token number" style="color:#36acaa">95</span><span class="token plain"> insertions</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">+</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_FzQ2"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MUvd" aria-hidden="true"><svg class="copyButtonIcon_kr8h" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_EbNa" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_wVXI" id="82-自动上传制品避免反复手动上传的问题">8.2 自动上传制品，避免反复手动上传的问题<a class="hash-link" href="#82-自动上传制品避免反复手动上传的问题" title="Direct link to heading">​</a></h3><p>我们可以通过<code>Github action</code>的流程化<code>CI/CD</code>，来帮助我们自动提交制品,从而避免手动操作这种容易出错且繁琐的操作。</p><details class="details_u_g4 alert alert--info details_EK4R" data-collapsed="true"><summary>Step 1: 配置Github action workflows 脚本</summary><div><div class="collapsibleContent_cV8I"><div class="language-yaml codeBlockContainer_BUZR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_FguA">.github/workflows/publishArtifact.yml</div><div class="codeBlockContent_n4dD"><pre tabindex="0" class="prism-code language-yaml codeBlock_i7dA thin-scrollbar"><code class="codeBlockLines_vRyG"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Publish package to the Maven Central Repository</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#  构建触发条件为源代码版本号变动</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">push</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">tags</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;**&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">jobs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">publish</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">runs-on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ubuntu</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">steps</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> actions/checkout@v2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Set up JDK 71</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> actions/setup</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">java@v2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">with</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">java-version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;17&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">distribution</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;adopt&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Grant execute permission for gradlew</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> chmod +x gradlew</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Build with Gradle</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ./gradlew build</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Decode</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          echo &quot;${{secrets.GPG_SIGNING_SECRET_KEY_BASE64}}&quot; &gt; ~/.gradle/secring.gpg.base64</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          base64 -d ~/.gradle/secring.gpg.base64 &gt; ~/.gradle/secring.gpg</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Publish package</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> gradle publish  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">Psigning.keyId=$</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">secrets.GPG_SIGNING_KEY_ID</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">Psigning.password=$</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">secrets.GPG_SIGNING_KEY_PASSWORD</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">Psigning.secretKeyRingFile=$(echo ~/.gradle/secring.gpg)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">env</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">OSSRH_USERNAME</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> secrets.OSSRH_USERNAME </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">OSSRH_PASSWORD</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> secrets.OSSRH_PASSWORD </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_FzQ2"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MUvd" aria-hidden="true"><svg class="copyButtonIcon_kr8h" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_EbNa" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><details class="details_u_g4 alert alert--info details_EK4R" data-collapsed="true"><summary>Step 2: GPG私钥转码为base64文本并用于流程化脚本中的变量使用</summary><div><div class="collapsibleContent_cV8I"><div class="language-shell codeBlockContainer_BUZR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_n4dD"><pre tabindex="0" class="prism-code language-shell codeBlock_i7dA thin-scrollbar"><code class="codeBlockLines_vRyG"><span class="token-line" style="color:#393A34"><span class="token plain">$ base64 ~/root@wuchuheng.cn.gpg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lQWGBGNzbw0BDADJG0gP5wpw6PFV4Egyvhzssa/YFaeDP+LeW</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.base64文本</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.k4jlW8g</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_FzQ2"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MUvd" aria-hidden="true"><svg class="copyButtonIcon_kr8h" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_EbNa" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><details class="details_u_g4 alert alert--info details_EK4R" data-collapsed="true"><summary>Step 3: 配置Github action workflows脚本的变量</summary><div><div class="collapsibleContent_cV8I"><div style="display:flex;justify-content:center;align-items:center;justify-items:center"><img src="https://qiniu.wuchuheng.com/howToPublishJavaLiberyToMvn17.png" alt="" style="width:40rem"></div><blockquote><p> 当前示例的源代码都在<a href="https://github.com/wuchuheng/gradle-libery-demo-java" target="_blank" rel="noopener noreferrer">gradle-libery-demo-java</a>中.
提交下当前的修改,</p></blockquote><div class="language-bash codeBlockContainer_BUZR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_n4dD"><pre tabindex="0" class="prism-code language-bash codeBlock_i7dA thin-scrollbar"><code class="codeBlockLines_vRyG"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> .github/workflows/publishArtifact.yml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> commit -m </span><span class="token string" style="color:#e3116c">&quot;chore: 添加github workflows.&quot;</span><br></span></code></pre><div class="buttonGroup_FzQ2"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MUvd" aria-hidden="true"><svg class="copyButtonIcon_kr8h" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_EbNa" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><details class="details_u_g4 alert alert--info details_EK4R" data-collapsed="true"><summary>Step 4: 提交版本号然后推送代码并触发构建脚本</summary><div><div class="collapsibleContent_cV8I"><div class="language-yaml codeBlockContainer_BUZR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_FguA">更新lib/build.gradle版本号</div><div class="codeBlockContent_n4dD"><pre tabindex="0" class="prism-code language-yaml codeBlock_i7dA thin-scrollbar"><code class="codeBlockLines_vRyG"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 2 定义要发行的版本号</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">version = &quot;0.0.4&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">...</span><br></span></code></pre><div class="buttonGroup_FzQ2"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MUvd" aria-hidden="true"><svg class="copyButtonIcon_kr8h" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_EbNa" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-bash codeBlockContainer_BUZR theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_FguA">提交、打上版本号并推送代码触发构建脚本</div><div class="codeBlockContent_n4dD"><pre tabindex="0" class="prism-code language-bash codeBlock_i7dA thin-scrollbar"><code class="codeBlockLines_vRyG"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> -A</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> commit -m </span><span class="token string" style="color:#e3116c">&quot;version: 0.0.4&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> tag </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain">.4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> push origin master </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;-- 推送代码</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> push </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain">.4 </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;-- 推送版本号且源代码的版本号变动会触发构建流程</span><br></span></code></pre><div class="buttonGroup_FzQ2"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MUvd" aria-hidden="true"><svg class="copyButtonIcon_kr8h" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_EbNa" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><details class="details_u_g4 alert alert--info details_EK4R" data-collapsed="true"><summary>Final step: 查看流程执行的结果</summary><div><div class="collapsibleContent_cV8I"><div style="display:flex;justify-content:center;align-items:center;justify-items:center"><img src="https://qiniu.wuchuheng.com/howToCreateAJavaLiberyAndPublishToMvn18.png" alt="" style="width:40rem"></div><div style="display:flex;justify-content:center;align-items:center;justify-items:center"><img src="https://qiniu.wuchuheng.com/howToCreateAJavaLiberyAndPublishToMvn19.png" alt="" style="width:40rem"></div></div></div></details><h3 class="anchor anchorWithStickyNavbar_wVXI" id="83-关闭sonatypeossrhissue">8.3 关闭sonatype(OSSRH)Issue<a class="hash-link" href="#83-关闭sonatypeossrhissue" title="Direct link to heading">​</a></h3><p>到了这一步，我们创建<code>issue</code>其目的是要创建一个开源、能发布的项目出来，现在我们已经做到了，而这个<code>issue</code>也就到了关闭的时候了。</p><details class="details_u_g4 alert alert--info details_EK4R" data-collapsed="true"><summary>操作截图</summary><div><div class="collapsibleContent_cV8I"><div style="display:flex;justify-content:center;align-items:center;justify-items:center"><img src="https://qiniu.wuchuheng.com/howToCreateAJavaLiberyAndPublishToMvn20.png" alt="" style="width:40rem"></div></div></div></details><h2 class="anchor anchorWithStickyNavbar_wVXI" id="9-重要参数合集">9 重要参数合集<a class="hash-link" href="#9-重要参数合集" title="Direct link to heading">​</a></h2><details class="details_u_g4 alert alert--info details_EK4R" data-collapsed="true"><summary>5.1 snonatype 账号</summary><div><div class="collapsibleContent_cV8I"><ul><li>OSSRH账号: <a href="mailto:root@wuchuheng.cn" target="_blank" rel="noopener noreferrer">root@wuchuheng.cn</a></li><li>OSSRH密码: (不能说)</li><li>groupID: cn.wuchuheng</li></ul><blockquote><p>注意: 发布时需要使用</p></blockquote></div></div></details><details class="details_u_g4 alert alert--info details_EK4R" data-collapsed="true"><summary>5.2 gpg 密钥</summary><div><div class="collapsibleContent_cV8I"><ul><li>GPG指纹: 30D55DBBAF2D0F957FC5AA9347BF092C7C49CDB8</li><li>GPG私钥保存密码: (不能说)</li><li>GPG私钥: ~/<a href="mailto:root@wuchuheng.cn.gpg" target="_blank" rel="noopener noreferrer">root@wuchuheng.cn.gpg</a></li></ul><blockquote><p>注意: 发布时需要使用</p></blockquote></div></div></details><h2 class="anchor anchorWithStickyNavbar_wVXI" id="10-小结">10 小结<a class="hash-link" href="#10-小结" title="Direct link to heading">​</a></h2><p>总体来说,想要从0去发布一个<code>java</code>的<code>package</code>，其过程步骤还是比较繁杂的。但其主干步骤也就4步，分别:</p><ol><li>创建<code>OSSRH</code>账号和项目</li><li>制作<code>GPG</code>密钥等</li><li>初始化一个<code>java</code>库</li><li>用户<code>GPG</code>加密和使用<code>OSSRH</code>账号把库发布出去</li></ol><p>最后本文的示例代码放在文中的最后，希望能为你提供个参考用。</p><h2 class="anchor anchorWithStickyNavbar_wVXI" id="11-qa">11 Q&amp;A<a class="hash-link" href="#11-qa" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_wVXI" id="111-为什么要在配置中有2个推的链接">11.1 为什么要在配置中有2个推的链接?<a class="hash-link" href="#111-为什么要在配置中有2个推的链接" title="Direct link to heading">​</a></h3><p>2条链接分别是:</p><ul><li><a href="https://s01.oss.sonatype.org/content/repositories/snapshots" target="_blank" rel="noopener noreferrer">https://s01.oss.sonatype.org/content/repositories/snapshots</a></li><li><a href="https://s01.oss.sonatype.org/service/local/staging/deploy/maven2/" target="_blank" rel="noopener noreferrer">https://s01.oss.sonatype.org/service/local/staging/deploy/maven2/</a></li></ul><p>他们之间的最大的区别就是往<code>snapshots</code>这个推送时，包的版本号是可以覆盖的， 而另一个条则不行。 可以覆盖的仓库可以很好解决开发时，对同一个版本号
的多次提交，比如说我开发<code>0.0.1</code>版本时，已经上传了，而测试人员在使用时发现了问题时，这时我修复好问题后，又可以重新上传同样的<code>0.0.1</code>版本，而不用
再次迭代一个版本号。</p><h2 class="anchor anchorWithStickyNavbar_wVXI" id="12-参考资料">12 参考资料<a class="hash-link" href="#12-参考资料" title="Direct link to heading">​</a></h2><ul><li><a href="https://segmentfault.com/a/1190000040411812?u_atoken=39db0774-68e5-4017-8d1d-4e5a77d7bef8&amp;u_asession=01RX42zUhbaLhLbMGGXawkRYVCEI2seql81EOlIQyrN8H_hSulNkJwDLVvJT2dme_wX0KNBwm7Lovlpxjd_P_q4JsKWYrT3W_NKPr8w6oU7K9954p5BlAeQ1BAxrE-CNYBXrFRrFEwkAXlkkWTaFgeRmBkFo3NEHBv0PZUm6pbxQU&amp;u_asig=05_QksrQ7iDyD_0_R2DPmHbl1vu7S2qr99Pc_cJ52FdA5YvSKqdQtPcJmOG21h4tM8BOdrfn3oOb_LVsfRM01MhoBbAZsDKGsh5gAttD6yn_5lkUoNXXWCIEgPkK9x-xvGfzTPG0E_sVEccifWxj8L395sOf1VkStI3YrW4yvnMPv9JS7q8ZD7Xtz2Ly-b0kmuyAKRFSVJkkdwVUnyHAIJzc3ChDeLVnL7d7qdeLky1nb6pcNPnRNHXFGHz5V_OAA-7DOpsDkA_bmTlLhsyWRKzO3h9VXwMyh6PgyDIVSG1W_zHWrR6Je6anami5oj0wz4XMLExHdtQofSCYzmLqspAuHAX5GcOD-ccH6MM0TMYDQWY-zeVmeUWXJE_Fj-YFgimWspDxyAEEo4kbsryBKb9Q&amp;u_aref=%2B8m1isFAxzFaw4ZkwIl6WVoNWZQ%3D" target="_blank" rel="noopener noreferrer">Gradle 将 Java 类库发布到 Maven 中心仓库</a></li><li><a href="https://woodwhales.cn/2021/09/19/083/" target="_blank" rel="noopener noreferrer">发布自己的 jar 包到 Maven 中央仓库 ( mvnrepository.com )</a></li><li><a href="https://search.maven.org/" target="_blank" rel="noopener noreferrer">maven搜索</a></li><li><a href="https://github.com/wuchuheng/gradle-libery-demo-java" target="_blank" rel="noopener noreferrer">本文演示的源代码gradle-libery-demo-java</a></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/wuchuheng/wuchuheng.github.io/edit/master/docs/09.Java/18.Gradle发布java库.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_fxEZ" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_VBtd"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/Java/JPA双向死循环解决方法"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">17.JPA双向死循环解决方法</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/Java/关于在java中http的基本使用示例"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">19 关于在java中http的基本使用示例</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_RgoZ thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-本文的目标是什么" class="table-of-contents__link toc-highlight">1 本文的目标是什么?</a></li><li><a href="#2-准备工作" class="table-of-contents__link toc-highlight">2 准备工作</a></li><li><a href="#3-获取sonatype仓库的发包许可" class="table-of-contents__link toc-highlight">3 获取sonatype仓库的发包许可</a><ul><li><a href="#31-注册sonatypeossrh账号" class="table-of-contents__link toc-highlight">3.1 注册sonatype(OSSRH)账号</a></li><li><a href="#32-提交创建项目的issue" class="table-of-contents__link toc-highlight">3.2 提交创建项目的issue</a></li><li><a href="#33-等待审核机器人回复issue" class="table-of-contents__link toc-highlight">3.3 等待审核机器人回复Issue</a></li><li><a href="#34-添加txt域名解析" class="table-of-contents__link toc-highlight">3.4 添加TXT域名解析</a></li><li><a href="#35-回复issue并告知对方txt记录已添加" class="table-of-contents__link toc-highlight">3.5 回复Issue并告知对方Txt记录已添加</a></li><li><a href="#36-完成仓库的发包许可" class="table-of-contents__link toc-highlight">3.6 完成仓库的发包许可</a></li></ul></li><li><a href="#4-初始化gpg密钥以用于发包时对包进行加密" class="table-of-contents__link toc-highlight">4 初始化GPG密钥以用于发包时对包进行加密</a><ul><li><a href="#41-生成密钥" class="table-of-contents__link toc-highlight">4.1 生成密钥</a></li><li><a href="#42-把生成的密钥上传到公网上" class="table-of-contents__link toc-highlight">4.2 把生成的密钥上传到公网上</a></li><li><a href="#43-导出私钥用于发布时加密使用" class="table-of-contents__link toc-highlight">4.3 导出私钥用于发布时加密使用</a></li></ul></li><li><a href="#5-初始化java包" class="table-of-contents__link toc-highlight">5 初始化java包</a></li><li><a href="#6-发布相关包的配置" class="table-of-contents__link toc-highlight">6 发布相关包的配置</a><ul><li><a href="#61-配置gradle配置文件" class="table-of-contents__link toc-highlight">6.1 配置Gradle配置文件</a></li><li><a href="#61-编写包的代码" class="table-of-contents__link toc-highlight">6.1 编写包的代码</a></li></ul></li><li><a href="#7-手动发布" class="table-of-contents__link toc-highlight">7 手动发布</a><ul><li><a href="#71-生成发布包" class="table-of-contents__link toc-highlight">7.1 生成发布包</a></li><li><a href="#72-上传到仓库中" class="table-of-contents__link toc-highlight">7.2 上传到仓库中</a></li><li><a href="#73-去仓库后台查看刚上传的包" class="table-of-contents__link toc-highlight">7.3 去仓库后台查看刚上传的包</a></li><li><a href="#74-正式发布" class="table-of-contents__link toc-highlight">7.4 正式发布</a></li></ul></li><li><a href="#8-后续小改动" class="table-of-contents__link toc-highlight">8 后续小改动</a><ul><li><a href="#81-解决libbuildgradle配置中账号暴露问题" class="table-of-contents__link toc-highlight">8.1 解决<code>lib/build.gradle</code>配置中账号暴露问题</a></li><li><a href="#82-自动上传制品避免反复手动上传的问题" class="table-of-contents__link toc-highlight">8.2 自动上传制品，避免反复手动上传的问题</a></li><li><a href="#83-关闭sonatypeossrhissue" class="table-of-contents__link toc-highlight">8.3 关闭sonatype(OSSRH)Issue</a></li></ul></li><li><a href="#9-重要参数合集" class="table-of-contents__link toc-highlight">9 重要参数合集</a></li><li><a href="#10-小结" class="table-of-contents__link toc-highlight">10 小结</a></li><li><a href="#11-qa" class="table-of-contents__link toc-highlight">11 Q&amp;A</a><ul><li><a href="#111-为什么要在配置中有2个推的链接" class="table-of-contents__link toc-highlight">11.1 为什么要在配置中有2个推的链接?</a></li></ul></li><li><a href="#12-参考资料" class="table-of-contents__link toc-highlight">12 参考资料</a></li></ul></div></div></div></div></main></div></div></div>
<script src="/assets/js/runtime~main.17f5a766.js"></script>
<script src="/assets/js/main.3144a24f.js"></script>
</body>
</html>